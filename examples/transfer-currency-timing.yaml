# Alice writes Bob a check, which is then transferred from her account to Bob's account.

'@context':
  - https://git.io/vf-examples-jsonld-context
  - bob: https://bob.example/
    alice: https://alice.example/
    banka: https://banka.example/
    bankb: https://bankb.example/
    central: https://centralbank.example/

'@id': rgh:valueflows/valueflows/master/examples/transfer-currency-timing.yaml
'@graph':

  # accounts before

  - '@id': banka:b75d8f6a-e2df-4e52-b36d-1a22a66f4ead
    '@type': EconomicResource
    skos:note: Alice's account
    classifiedAs: wd:Q4917 # US Dollar
    currentQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 845
    currentOwnedQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 845

  - '@id': bankb:3be5259d-10f0-431c-9fec-9c0c15a461d3
    '@type': EconomicResource
    skos:note: Bob's account
    classifiedAs: wd:Q4917 # US Dollar
    currentQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 530
    currentOwnedQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 530

  # alice writes a check to bob and bob deposits it - bankb sends the instruction to the central bank

  - '@id': urn:uuid:c7897c39-7f05-4a5d-a487-80e130a2414a
    '@type': Commitment
    action: transfer
    transferOf:
    - possession
    - ownership
    resourceClassifiedAs: wd:Q4917 # US Dollar
    resourceInventoriedAs: banka:b75d8f6a-e2df-4e52-b36d-1a22a66f4ead # alice's account
    toResourceInventoriedAs: bankb:3be5259d-10f0-431c-9fec-9c0c15a461d3 # bob's account
    provider: https://banka.example
    receiver: https://bankb.example
    flowQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 100
    time:inXSDDateTimeStamp: 2019-05-25T09:30:00-5:00

  # central bank moves money between its accounts for banka and bankb and settles it along with other transfers
  # the banks settle and then apply the settlements as directed giving in effect something like this

  - '@id': urn:uuid:0468e9b9-4d54-4eee-9d3f-bc76db11710a
    '@type': EconomicEvent
    action: transfer
    transferOf:
    - possession
    - ownership
    resourceClassifiedAs: wd:Q4917 # US Dollar
    resourceInventoriedAs: banka:b75d8f6a-e2df-4e52-b36d-1a22a66f4ead # alice's account
    toResourceInventoriedAs: centralbank:f47064eb-7120-4b31-b882-770165901fe6 # central bank account for banka
    provider: https://banka.example
    receiver: https://centralbank.example
    flowQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 100
    time:inXSDDateTimeStamp: 2019-05-26T13:30:00-5:00

  - '@id': urn:uuid:d4d2fd71-34f2-41c3-b1c5-19ad5ed2da59
    '@type': Fulfillment
    fulfills: urn:uuid:c7897c39-7f05-4a5d-a487-80e130a2414a # the commitment
    fulfilledBy: urn:uuid:0468e9b9-4d54-4eee-9d3f-bc76db11710a # the economic event
    fulfilledQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 100

  - '@id': urn:uuid:6405b8ad-0ac2-4d58-abdb-0808903c78ad
    '@type': EconomicEvent
    action: transfer
    transferOf:
    - possession
    - ownership
    resourceClassifiedAs: wd:Q4917 # US Dollar
    resourceInventoriedAs: centralbank:f47064eb-7120-4b31-b882-770165901fe6 # central bank account for bankb
    toResourceInventoriedAs: bankb:3be5259d-10f0-431c-9fec-9c0c15a461d3 # bob's account
    provider: https://central.example
    receiver: https://bankb.example
    flowQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 100
    time:inXSDDateTimeStamp: 2019-05-26T13:30:00-5:00

  - '@id': urn:uuid:6f438393-7f87-4914-806c-e23a4fd15e89
    '@type': Fulfillment
    fulfills: urn:uuid:c7897c39-7f05-4a5d-a487-80e130a2414a # the commitment
    fulfilledBy: urn:uuid:6405b8ad-0ac2-4d58-abdb-0808903c78ad # the economic event
    fulfilledQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 100

  # snapshot of resources

  - '@id': banka:b75d8f6a-e2df-4e52-b36d-1a22a66f4ead
    '@type': EconomicResource
    skos:note: Alice's account
    classifiedAs: wd:Q4917 # US Dollar
    currentQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 745
    currentOwnedQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 745

  - '@id': bankb:3be5259d-10f0-431c-9fec-9c0c15a461d3
    '@type': EconomicResource
    skos:note: Bob's account
    classifiedAs: wd:Q4917 # US Dollar
    currentQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 630
    currentOwnedQuantity:
      qudt:unit: unit:Number
      qudt:numericValue: 630
